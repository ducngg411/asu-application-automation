!function(){var e={669:function(e,t,i){e.exports=i(609)},448:function(e,t,i){"use strict";var n=i(867),s=i(26),o=i(372),r=i(327),a=i(97),c=i(109),l=i(985),u=i(61);e.exports=function(e){return new Promise((function(t,i){var p=e.data,d=e.headers;n.isFormData(p)&&delete d["Content-Type"];var f=new XMLHttpRequest;if(e.auth){var h=e.auth.username||"",m=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";d.Authorization="Basic "+btoa(h+":"+m)}var g=a(e.baseURL,e.url);if(f.open(e.method.toUpperCase(),r(g,e.params,e.paramsSerializer),!0),f.timeout=e.timeout,f.onreadystatechange=function(){if(f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in f?c(f.getAllResponseHeaders()):null,o={data:e.responseType&&"text"!==e.responseType?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:n,config:e,request:f};s(t,i,o),f=null}},f.onabort=function(){f&&(i(u("Request aborted",e,"ECONNABORTED",f)),f=null)},f.onerror=function(){i(u("Network Error",e,null,f)),f=null},f.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),i(u(t,e,"ECONNABORTED",f)),f=null},n.isStandardBrowserEnv()){var y=(e.withCredentials||l(g))&&e.xsrfCookieName?o.read(e.xsrfCookieName):void 0;y&&(d[e.xsrfHeaderName]=y)}if("setRequestHeader"in f&&n.forEach(d,(function(e,t){void 0===p&&"content-type"===t.toLowerCase()?delete d[t]:f.setRequestHeader(t,e)})),n.isUndefined(e.withCredentials)||(f.withCredentials=!!e.withCredentials),e.responseType)try{f.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&f.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){f&&(f.abort(),i(e),f=null)})),p||(p=null),f.send(p)}))}},609:function(e,t,i){"use strict";var n=i(867),s=i(849),o=i(321),r=i(185);function a(e){var t=new o(e),i=s(o.prototype.request,t);return n.extend(i,o.prototype,t),n.extend(i,t),i}var c=a(i(655));c.Axios=o,c.create=function(e){return a(r(c.defaults,e))},c.Cancel=i(263),c.CancelToken=i(972),c.isCancel=i(502),c.all=function(e){return Promise.all(e)},c.spread=i(713),c.isAxiosError=i(268),e.exports=c,e.exports.default=c},263:function(e){"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},972:function(e,t,i){"use strict";var n=i(263);function s(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var i=this;e((function(e){i.reason||(i.reason=new n(e),t(i.reason))}))}s.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},s.source=function(){var e;return{token:new s((function(t){e=t})),cancel:e}},e.exports=s},502:function(e){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},321:function(e,t,i){"use strict";var n=i(867),s=i(327),o=i(782),r=i(572),a=i(185);function c(e){this.defaults=e,this.interceptors={request:new o,response:new o}}c.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=a(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[r,void 0],i=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)i=i.then(t.shift(),t.shift());return i},c.prototype.getUri=function(e){return e=a(this.defaults,e),s(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],(function(e){c.prototype[e]=function(t,i){return this.request(a(i||{},{method:e,url:t,data:(i||{}).data}))}})),n.forEach(["post","put","patch"],(function(e){c.prototype[e]=function(t,i,n){return this.request(a(n||{},{method:e,url:t,data:i}))}})),e.exports=c},782:function(e,t,i){"use strict";var n=i(867);function s(){this.handlers=[]}s.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},s.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},s.prototype.forEach=function(e){n.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=s},97:function(e,t,i){"use strict";var n=i(793),s=i(303);e.exports=function(e,t){return e&&!n(t)?s(e,t):t}},61:function(e,t,i){"use strict";var n=i(481);e.exports=function(e,t,i,s,o){var r=new Error(e);return n(r,t,i,s,o)}},572:function(e,t,i){"use strict";var n=i(867),s=i(527),o=i(502),r=i(655);function a(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return a(e),e.headers=e.headers||{},e.data=s(e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),n.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||r.adapter)(e).then((function(t){return a(e),t.data=s(t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(a(e),t&&t.response&&(t.response.data=s(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},481:function(e){"use strict";e.exports=function(e,t,i,n,s){return e.config=t,i&&(e.code=i),e.request=n,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},185:function(e,t,i){"use strict";var n=i(867);e.exports=function(e,t){t=t||{};var i={},s=["url","method","data"],o=["headers","auth","proxy","params"],r=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function c(e,t){return n.isPlainObject(e)&&n.isPlainObject(t)?n.merge(e,t):n.isPlainObject(t)?n.merge({},t):n.isArray(t)?t.slice():t}function l(s){n.isUndefined(t[s])?n.isUndefined(e[s])||(i[s]=c(void 0,e[s])):i[s]=c(e[s],t[s])}n.forEach(s,(function(e){n.isUndefined(t[e])||(i[e]=c(void 0,t[e]))})),n.forEach(o,l),n.forEach(r,(function(s){n.isUndefined(t[s])?n.isUndefined(e[s])||(i[s]=c(void 0,e[s])):i[s]=c(void 0,t[s])})),n.forEach(a,(function(n){n in t?i[n]=c(e[n],t[n]):n in e&&(i[n]=c(void 0,e[n]))}));var u=s.concat(o).concat(r).concat(a),p=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===u.indexOf(e)}));return n.forEach(p,l),i}},26:function(e,t,i){"use strict";var n=i(61);e.exports=function(e,t,i){var s=i.config.validateStatus;i.status&&s&&!s(i.status)?t(n("Request failed with status code "+i.status,i.config,null,i.request,i)):e(i)}},527:function(e,t,i){"use strict";var n=i(867);e.exports=function(e,t,i){return n.forEach(i,(function(i){e=i(e,t)})),e}},655:function(e,t,i){"use strict";var n=i(867),s=i(16),o={"Content-Type":"application/x-www-form-urlencoded"};function r(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var a,c={adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(a=i(448)),a),transformRequest:[function(e,t){return s(t,"Accept"),s(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(r(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)?(r(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};n.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),n.forEach(["post","put","patch"],(function(e){c.headers[e]=n.merge(o)})),e.exports=c},849:function(e){"use strict";e.exports=function(e,t){return function(){for(var i=new Array(arguments.length),n=0;n<i.length;n++)i[n]=arguments[n];return e.apply(t,i)}}},327:function(e,t,i){"use strict";var n=i(867);function s(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,i){if(!t)return e;var o;if(i)o=i(t);else if(n.isURLSearchParams(t))o=t.toString();else{var r=[];n.forEach(t,(function(e,t){null!=e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,(function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),r.push(s(t)+"="+s(e))})))})),o=r.join("&")}if(o){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},303:function(e){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},372:function(e,t,i){"use strict";var n=i(867);e.exports=n.isStandardBrowserEnv()?{write:function(e,t,i,s,o,r){var a=[];a.push(e+"="+encodeURIComponent(t)),n.isNumber(i)&&a.push("expires="+new Date(i).toGMTString()),n.isString(s)&&a.push("path="+s),n.isString(o)&&a.push("domain="+o),!0===r&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},793:function(e){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},268:function(e){"use strict";e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},985:function(e,t,i){"use strict";var n=i(867);e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");function s(e){var n=e;return t&&(i.setAttribute("href",n),n=i.href),i.setAttribute("href",n),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}return e=s(window.location.href),function(t){var i=n.isString(t)?s(t):t;return i.protocol===e.protocol&&i.host===e.host}}():function(){return!0}},16:function(e,t,i){"use strict";var n=i(867);e.exports=function(e,t){n.forEach(e,(function(i,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=i,delete e[n])}))}},109:function(e,t,i){"use strict";var n=i(867),s=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,i,o,r={};return e?(n.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=n.trim(e.substr(0,o)).toLowerCase(),i=n.trim(e.substr(o+1)),t){if(r[t]&&s.indexOf(t)>=0)return;r[t]="set-cookie"===t?(r[t]?r[t]:[]).concat([i]):r[t]?r[t]+", "+i:i}})),r):r}},713:function(e){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},867:function(e,t,i){"use strict";var n=i(849),s=Object.prototype.toString;function o(e){return"[object Array]"===s.call(e)}function r(e){return void 0===e}function a(e){return null!==e&&"object"==typeof e}function c(e){if("[object Object]"!==s.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function l(e){return"[object Function]"===s.call(e)}function u(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var i=0,n=e.length;i<n;i++)t.call(null,e[i],i,e);else for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.call(null,e[s],s,e)}e.exports={isArray:o,isArrayBuffer:function(e){return"[object ArrayBuffer]"===s.call(e)},isBuffer:function(e){return null!==e&&!r(e)&&null!==e.constructor&&!r(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:a,isPlainObject:c,isUndefined:r,isDate:function(e){return"[object Date]"===s.call(e)},isFile:function(e){return"[object File]"===s.call(e)},isBlob:function(e){return"[object Blob]"===s.call(e)},isFunction:l,isStream:function(e){return a(e)&&l(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:u,merge:function e(){var t={};function i(i,n){c(t[n])&&c(i)?t[n]=e(t[n],i):c(i)?t[n]=e({},i):o(i)?t[n]=i.slice():t[n]=i}for(var n=0,s=arguments.length;n<s;n++)u(arguments[n],i);return t},extend:function(e,t,i){return u(t,(function(t,s){e[s]=i&&"function"==typeof t?n(t,i):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,n),o.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";var e=function(e){function t(e){try{const t=new URL(e).hostname.split("."),i=t.length-1,n=t.length>=3&&(t[i]+t[i-1]).length<=5;return t.splice(n?-3:-2).join(".")}catch(e){return null}}function i(e,t){t=t||!1;let i=0;if((e=e||window.location.hostname).includes(".co.")||e.includes(".com.")){let t=e.split(".");t[t.length-1].length<=3&&(i=1)}return e=e.replace(/(https?:\/\/)?(www.)?/i,""),t||(e=(e=e.split(".")).slice(e.length-(2+i)).join(".")),-1!==e.indexOf("/")?e.split("/")[0]:e}return e&&((e=e).environment="production"==e.environment?"":e.environment),{getDomainName:i,getDefaultSubmissionUrl:function(){let t=e.recordUrlDomain;if(t||t?.length>0)return t;let n=e.region,s=e?.environment;return s&&s?.length>0&&(s="-"+s),`https://cscript-${n}${s}.${i()}/cookiesapi/submit`},getSubmissionUrl:function(){let t=""==e.environment?"":"-"+e.environment,i=window?.cassieResourceRootDomain??"cassiecloud.com";return`https://cscript-${e.region}${t}.${i}/cookiesapi/submit`},determineJsonUrl:function(){let t="";return t=e.baseUrl+"/"+e.licenseKey+"/V2/"+e.profileSettings.WidgetId+"_"+e.languageCode+".json",t},checkDomain:function(e){if("all"==e||"N/A"==e)return!0;let i=e.trim().split(",");for(let e=0;e<i.length;e++){let n=i[e].trim();if("all"==n)return!0;-1!=n.indexOf("*.")&&(n=n.replace("*.",""));let s=document.domain;if(-1!=s.indexOf(n))return!0;let o=t("https://");if(o&&-1!=s.indexOf(o))return!0}return!1}}},t=function(e,t){e&&0!==e.length&&function(e,t){let i=t?"head":"body",n=document.createElement("body"),s=["script","link","meta","title","style","base","noscript"];n.innerHTML=e;let o=n.children;for(let e=0;e<o.length;e++){const n=o[e],r=document.createElement(n.tagName.toLocaleLowerCase());for(let e=0;e<n.attributes.length;e++){const t=n.attributes[e];r.setAttribute(t.name,t.value)}r.innerHTML=n.innerHTML,s.includes(r.tagName.toLocaleLowerCase())||!t?document.getElementsByTagName(i)[0].appendChild(r):document.getElementsByTagName("body")[0].appendChild(r)}n.remove()}(e,t)},s=n(669),o=n.n(s);o().defaults.withCredentials=!1;var r=function(e){return new Promise(((t,i)=>{o().get(e).then((e=>{t(e.data)})).catch((e=>{i(e)}))}))},a=function(e,t){return new Promise(((i,n)=>{o().get(e,t).then((e=>{i(e.data)})).catch((e=>{n(e)}))}))},c=function(e,t,i){return new Promise(((n,s)=>{try{o().post(e,t,i).then((e=>{n(e.data)})).catch((e=>{s(e)}))}catch(e){s(e)}}))},l=async function(e,t,i,n,s,o,r,c,l,u,p,d){var f=l+"/Home/SaveConsent?accessKey="+t+"&domain="+u+"&consentedCookieIds="+i+"&cookieFormConsent="+n+"&runFirstCookieIds="+s+"&privacyCookieIds="+o+"&custom1stPartyData="+r+"&privacyLink="+c+(p?`&userProfile=${p}`:"")+`&cookieCollectionId=${d}&expiryDays=`+e;let h=await a(f,{withCredentials:!0});return JSON.parse(h.CassieConsent)},u=async function(e,t,i,n,s,o){var r=n+"/Home/Index?accessKey="+t+"&domain="+i+(s?`&userProfile=${s}`:"")+"&cookieCollectionId="+o+"&expiryDays="+e;return await a(r,{withCredentials:!0})},p=async function(e,t,i){var n=i+"/Home/CdcPropagate?accessKey="+e+"&domain="+t;return await a(n,{withCredentials:!0})},d=function(){return/Trident\/|MSIE/.test(window.navigator.userAgent)},f=class{constructor(e,t=null){this.accessKey=e,this.cookies=this.getAllCookies(),this.defaultCookieExpiry=t??365,this.maxTimeout=2e3}getAllCookies(){for(var e={},t=document.cookie.split(";"),i=1;i<=t.length;i++){var n=t[i-1].split("="),s=n[0],o=n[1];void 0!==s&&s.length>0&&(s=s.trim()),void 0!==o&&o.length>0&&(o=o.trim()),e[s]=o}return e}getCookieValueByName=function(e){const t=`; ${document.cookie}`.split(`; ${e}=`);return 2===t.length?t.pop().split(";").shift().trim():null};sleep(e){return new Promise((t=>setTimeout(t,e)))}getProtectedCookieByName=function(e,t,i=2e3){return new Promise((async n=>{let s=i/100;for(let i=1;i<s;i++){const i=`; ${document.cookie}`.split(`; ${e}=`);if(2===i.length){let s=i.pop().split(";").shift();n({Key:e,Value:s,Expiry:t})}await this.sleep(100)}setTimeout(n(null),i)}))};getFormConsent=function(){let e,t="SyrenisCookieFormConsent_"+this.accessKey;try{e=JSON.parse(this.getCookieValueByName(t))??[]}catch(e){return[]}return e};getProtectedCookies=async function(e,t){let i=[],n=[];if(0==e?.length)return n;e.includes(",")?i=e.split(","):i[0]=e.trim();for(let e=0;e<i.length;e++){const o=i[e]?.trim();if(!o)continue;const r=t.find((e=>{let t=e.browserCookieName.trim().toLowerCase(),i=[];return t.includes(",")?i=t.split(",").map((e=>e.trim())):i.push(t),i.includes(o.toLowerCase())}));if(r&&0!=r?.expiry){var s=new Date;s.setDate(s.getDate()+r.expiry),n.push(this.getProtectedCookieByName(o,s.getTime().toString(),this.maxTimeout))}}return n=(await Promise.all(n)).filter((e=>e)),n.filter((e=>e))};recreateProtectedCookies(){try{let e=JSON.parse(this.getCookieValueByName("SyrenisCustom_"+this.accessKey));for(let t=0;t<e.length;t++){const i=e[t];this.getAllCookies()[i.Key]||this.storeCookieWithTimeExpiry(i.Key,i.Value,null,i.Expiry)}}catch(e){}}storeCookie=function(e,t,i,n){n=n??this.defaultCookieExpiry;let s=new Date;s.setTime(s.getTime()+24*n*60*60*1e3);let o="expires="+s.toUTCString();i=i??window.document.domain;let r=e+"="+t+";"+o+(d()?"":";domain="+i)+";path=/";document.cookie=r};storeCookieWithTimeExpiry=function(e,t,i,n){let s=new Date;s.setTime(n);let o=e+"="+t+";expires="+s.toUTCString()+";domain="+(i=i??window.document.domain)+";path=/";document.cookie=o};hasConsent=function(){let e=this.getAllCookies(),t=e["SyrenisCookieFormConsent_"+this.accessKey],i=e["SyrenisGuid_"+this.accessKey];return!(!t||!i)};getVisitGuid=function(){return this.getCookieValueByName("SyrenisGuid_"+this.accessKey)};getConsentDate=function(){let e=this.getCookieValueByName("SyrenisCookieConsentDate_"+this.accessKey);return e||(e=new Date(1970,0,1).getTime()),e};getPrivacyPolicyId=function(){let e=this.getCookieValueByName("SyrenisCookiePrivacyLink_"+this.accessKey);return e&&0!=e.length?e:null};getProtectedCookiesContainer=function(){return this.getCookieValueByName("SyrenisCustom_"+this.accessKey)}};let h,m,g;function y(e){var t=e.split(",").map((e=>e.trim().replace("*","").replace("https://","").replace("http://",""))).filter((e=>(e||e.length>0)&&"all"!==e.trim())).map((e=>e.trim().replace("*","")));return 0==t.length&&t.push("."+document.domain),t}var C=function(e,i){function n(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}function s(e){e.sort(((e,t)=>e.executionOrder-t.executionOrder)),e.sort(((e,t)=>t.isRunFirst-e.isRunFirst)),e.forEach((e=>{e.isStrictlyNecessary||(e.isOptIn?(t(e.bodyOptIn,!1),t(e.headOptIn,!0)):(t(e.bodyOptOut,!1),t(e.headOptOut,!0)))}))}function o(e){for(const[t,i]of Object.entries(e))y(m.supportedDomains).forEach((e=>{h.storeCookie(t.replace("Cassie","Syrenis"),i,e)}))}function r(e,t){e.forEach((e=>{let i=t.find((t=>t.channelId==e.channelId));e.isStrictlyNecessary?(e.hasConsent=!0,e.isOptIn=!0):i&&(e.hasConsent=!0,e.isOptIn=i.isOptIn)})),s(e.filter((e=>e.hasConsent)))}return m=e,g=i,h=new f(m.profileSettings.AccessKey,g),{runStrictlyNecessaryScripts:function(e){e.sort(((e,t)=>e.executionOrder-t.executionOrder)),e.sort(((e,t)=>t.isRunFirst-e.isRunFirst)),e.forEach((e=>{e.isStrictlyNecessary&&(t(e.bodyOptIn,!1),t(e.headOptIn,!0))}))},runOptInScripts:s,placeSyrenisCookies:o,processConsent:async function(e,t,i){let s=m.profileSettings.AccessKey,a=e.map((e=>({FieldID:`s${e.statementId}_c${e.channelId}`,IsChecked:e.isOptIn?1:0})));this.runStrictlyNecessaryScripts(t),r(t,e);let c=await h.getProtectedCookies(i.persistCookies,t);m.identityServiceUrl?o(await l(g,s,JSON.stringify([]),JSON.stringify(a),JSON.stringify([]),JSON.stringify([]),JSON.stringify(c),i.privacyId,m.identityServiceUrl,m.supportedDomains,m.crossDomainConsent,m?.profileSettings?.CookieCollectionId??1)):function(e,t){let i=m.profileSettings.AccessKey,s=y(m.supportedDomains);var o=n(),r=(new Date).getTime();s.forEach((n=>{null===h.getCookieValueByName("SyrenisGuid_"+i)&&h.storeCookie("SyrenisGuid_"+i,o,n),h.storeCookie("SyrenisCookieFormConsent_"+i,JSON.stringify(e),n),h.storeCookie("SyrenisCookiePrivacyLink_"+i,t,n),h.storeCookie("SyrenisCookieConsentDate_"+i,r,n)}))}(a,i.privacyId)},runConsent:async function(e){let t=m?.profileSettings?.CookieCollectionId??1;if(m.identityServiceUrl&&await async function(e){let t=(!h.hasConsent()||m.crossDomainConsent)&&await u(g,m.profileSettings.AccessKey,m.supportedDomains,m.identityServiceUrl,m.crossDomainConsent,e);if(null!==t){let e=JSON.parse(t.CassieConsent),n=t.Restored,s="boolean"!=typeof e&&e;if(s&&o(s),!1===n&&m.crossDomainConsent){var i=await p(m.profileSettings.AccessKey,m.supportedDomains,m.identityServiceUrl);document.getElementsByTagName("body")[0].insertAdjacentHTML("beforeend",i)}}}(t),!h.hasConsent())return;let i=JSON.parse(h.getCookieValueByName("SyrenisCookieFormConsent_"+m.profileSettings.AccessKey)).map((e=>{let t=e.FieldID.indexOf("c")+1;return{channelId:e.FieldID.substring(t,e.FieldID.length),isOptIn:1==e.IsChecked}}));h.recreateProtectedCookies(),this.runStrictlyNecessaryScripts(e),r(e,i)},getCurrentConsent:function(){let e=h.getFormConsent(),t=[];for(let i=0;i<e.length;i++){const n=e[i],s=n.FieldID.indexOf("_"),o=n.FieldID.substring(1,s),r=n.FieldID.substr(s+2),a=1==n.IsChecked;t.push({statementId:o,channelId:r,isOptIn:a})}return t},postConsentToCassie:async function(e,t,i,s){return new Promise((async(o,r)=>{let a={CookieFormID:m?.profileSettings?.WidgetId??null,LicenseID:m?.licenseKey,DivID:s,Preferences:h.getFormConsent(),appCodeName:navigator.appCodeName,appName:navigator.appName,appVersion:navigator.appVersion,cookieEnabled:navigator.cookieEnabled,geolocation:"",language:navigator.language,platform:navigator.platform,referrer:document.referrer.replace(/&/g,"%26"),submissionSource:t??"undefined_source",visitGUID:h.getVisitGuid()??n(),WebsiteURL:document.URL.replace(/&/g,"%26"),PrivacyPolicyID:i,custom1stPartyData:h.getProtectedCookiesContainer()};try{return o(await c(e,a,{timeout:5e3}))}catch(e){return r(e)}}))},dropStrictlyNecessaryCookies:function(e,t){let i=m.profileSettings.AccessKey,s=y(m.supportedDomains);var o=n(),r=(new Date).getTime();s.forEach((t=>{null===h.getCookieValueByName("SyrenisGuid_"+i)&&h.storeCookie("SyrenisGuid_"+i,o,t),h.storeCookie("SyrenisCookiePrivacyLink_"+i,e,t),h.storeCookie("SyrenisCookieConsentDate_"+i,r,t)})),this.runStrictlyNecessaryScripts(t)},saveGtmConsent:function(e){let t=m.profileSettings.AccessKey;y(m.supportedDomains).forEach((i=>{h.storeCookie("SyrenisGtmConsent_"+t,JSON.stringify(e),i)}))}}},S={emit:function(e,t){!function(e,t){t=t||{bubbles:!0,cancelable:!1};var i=document.createEvent("CustomEvent");i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),document.dispatchEvent(i)}(e,{detail:t,bubbles:!0,cancelable:!0})}};window.CassieWidget=class{datetimestamp=(new Date).getTime();domain=(new e).getDomainName();eventManager=S;constructor(t){let i=t.languageCode??"";(t.profileSettings?.SupportedLanguages??[]).includes(i)&&""!=i||(i="Default"),this.cassieSettings=function(e,t,i,n,s,o,r,a,c,l,u){return{licenseKey:e,profileSettings:t,baseUrl:i,languageCode:n,supportedDomains:s,environment:o,region:r,recordUrlDomain:a,identityServiceUrl:c,crossDomainConsent:l,customOptions:u}}(t.licenseKey,t.profileSettings,t.baseUrl,i,t.supportedDomains??"*."+this.domain,t.environment,t.region,t.recordUrlDomain,t.identityServiceUrl,t.crossDomainConsent,t.customOptions),this.cassieSettings.profileSettings?.TemplateOptions||(this.cassieSettings.profileSettings.TemplateOptions={},this.cassieSettings.profileSettings.TemplateOptions.PreBannerPosition=this.cassieSettings.profileSettings?.TemplateOptions?.PreBannerPosition??1,this.cassieSettings.profileSettings.TemplateOptions.WidgetPosition=this.cassieSettings.profileSettings?.TemplateOptions?.WidgetPosition??2),this.urlHelper=new e(this.cassieSettings),this.cookieWidgetDivId="cassie-widget",this.cassieScripts=[],this.widgetTemplate={},this.cassieWidgetFileSettings=null,this.gpcEnabled=(t.profileSettings.GpcEnabled&&navigator.globalPrivacyControl)??!1,this.bannerIsVisible=!1,this.modalIsVisible=!1,this.handlerUrl=this.urlHelper.getSubmissionUrl(),this.forceReconsent=!1,this.extentions=[{event:"Sample",extentionFunction:function(){console.log("Sample")}}],this.init()}async init(){this.createWidgetElement(),await this.getWidgetJson(),this.cassieWidgetFileSettings.identityServiceUrl&&!this.cassieSettings?.customOptions?.isPreview&&(this.cassieSettings.identityServiceUrl=this.cassieWidgetFileSettings.identityServiceUrl),this.cassieSettings?.crossDomainConsent&&this.cassieWidgetFileSettings.identityServiceUrlPrefix&&(this.cassieSettings.identityServiceUrl="https://"+this.cassieWidgetFileSettings.identityServiceUrlPrefix+"."+this.domain),this.syrenisHelper=new C(this.cassieSettings,this.cassieWidgetFileSettings.CassieCookiesExpiry),this.cookieHelper=new f(this.cassieSettings.profileSettings.AccessKey,this.cassieWidgetFileSettings.CassieCookiesExpiry);const e=this.cassieWidgetFileSettings.reconsentDate.toString(),t=e.endsWith("Z")?new Date(e):new Date(e+"Z");this.forceReconsent=t.getTime()>this.cookieHelper.getConsentDate()&&this.cookieHelper.hasConsent(),!this.forceReconsent&&await this.syrenisHelper.runConsent(this.cassieScripts),this.widgetTemplate.hasConsent=this.cookieHelper.hasConsent()&&!this.forceReconsent,this.widgetTemplate.useRadioButtons=this.cassieSettings.profileSettings.UseRadioButtons??!1,this.widgetTemplate.hasConsent||this.dropCookiesOnLoad(),await this.getTemplateFiles(),S.emit("CassieTemplateFilesLoaded")}registerExtention(e,t){this.extentions.push({event:e,extentionFunction:t})}runExtentions(e){let t=this.extentions.filter((t=>t.event==e));for(const e of t)e.extentionFunction()}dropCookiesOnLoad(){const e="auto_save",t=this.widgetTemplate.CookieDropBehaviourType??1;if(3===t)this.acceptAll(e);else if(2===t){let e=this.cookieHelper.getPrivacyPolicyId()??this.cassieWidgetFileSettings.privacyId;this.syrenisHelper.dropStrictlyNecessaryCookies(e,this.cassieScripts)}else if(4===t)this.acceptAll({respectGpc:!0,source:e});else if(1===t)return}getCurrentConsent(){return this.syrenisHelper.getCurrentConsent()}getGtmConsent(){let e=this.syrenisHelper.getCurrentConsent(),t=this.cassieScripts.filter((e=>null!=e.gtmConsentType&&""!=e.gtmConsentType)).reduce(((e,t)=>{let i=t.gtmConsentType;return e[i]||(e[i]=[]),e[i].push(t.channelId),e}),{});return Object.keys(t).map((i=>{let n=t[i].every((t=>e.find((e=>e.channelId==t))?.isOptIn))?"granted":"denied",s={};return s[i]=n,s}))}storeGtmConsent(){let e=this.getGtmConsent();e.length>0&&this.syrenisHelper.saveGtmConsent(e)}initializeTemplate(){S.emit("CassieTemplateInitialized")}hideBanner(){this.runExtentions("hideBanner"),this.bannerIsVisible=!1,S.emit("CassieBannerVisibility",!1)}showBanner(){this.runExtentions("showBanner"),this.bannerIsVisible=!0,S.emit("CassieBannerVisibility",!0)}showModal(){this.runExtentions("showModal"),this.modalIsVisible=!0,S.emit("CassieModalVisibility",!0)}hideModal(){this.runExtentions("hideModal"),this.modalIsVisible=!1,S.emit("CassieModalVisibility",!1)}getPreferences(){let e=this.widgetTemplate.Categories,t=[];return e.forEach((e=>{let i=e.Cookies.map((e=>({channelId:e.ChannelID,gpcEnabled:e.GpcEnabled,statementId:e.Statements[0].StatementID,isOptIn:e.DefaultValue})));t.push(...i)})),t}async submitConsent(e,t){if(S.emit("CassieSubmitConsent",e),await this.syrenisHelper.processConsent(e,this.cassieScripts,this.cassieWidgetFileSettings),this.storeGtmConsent(),this.widgetTemplate.hasConsent=!0,S.emit("CassieProcessedConsent",e),this.handlerUrl)try{let i=this.cookieHelper.getPrivacyPolicyId()??this.cassieWidgetFileSettings.privacyId;this.syrenisHelper.postConsentToCassie(this.handlerUrl,t,i,this.cookieWidgetDivId).then((t=>(S.emit("CassieSubmittedConsent",e),t))).catch((async n=>{let s=await this.syrenisHelper.postConsentToCassie(this.defaultSubmissionUrl,t,i,this.cookieWidgetDivId);return S.emit("CassieSubmittedConsent",e),s}))}catch(e){return console.error(e),e}}addConsentListener(e){document.addEventListener("CassieProcessedConsent",e)}hasConsent(){return this.widgetTemplate.hasConsent=this.cookieHelper.hasConsent(),this.widgetTemplate.hasConsent}acceptAll(e){if("string"==typeof e||null==e){var t=e;(e={}).source=t,e.respectGpc=!1}let i=this.getPreferences();i.forEach((t=>{t.isOptIn=!0,e.respectGpc&&this.gpcEnabled&&t.gpcEnabled&&(t.isOptIn=!1)})),this.submitConsent(i,e.source)}rejectAll(e){let t=this.getPreferences();t.forEach((e=>e.isOptIn=!1)),this.submitConsent(t,e)}createWidgetElement(){if(!this.cassieSettings.profileSettings.LoadTemplateHtml)return;let e=this.cookieWidgetDivId;if(null==document.getElementById(e)||0===document.getElementById(e).length){var t=document.createElement("div");t.setAttribute("id",e),t.style.display="none",t.classList.add("syrenis-cookie-widget"),document.body.appendChild(t)}}async getWidgetJson(){let e=this.urlHelper.determineJsonUrl(),t=await r(e);this.populateWidget(t),S.emit("CassieWidgetFileLoaded",null)}async getTemplateFiles(){let e=`${this.cassieSettings.baseUrl}/templates/${this.cassieSettings.profileSettings.Template}/`;if(this.cassieSettings.profileSettings.LoadTemplateCss&&this.AddCssToPage(e+"template.min.css"),this.cassieSettings.profileSettings.LoadTemplateHtml){let t=await r(e+"index.min.html");this.loadHtmlToElement(this.cookieWidgetDivId,t)}if(this.cassieSettings.profileSettings.LoadTemplateJs){let t=await r(e+"template.min.js");this.loadScriptToDOM(t)}}AddCssToPage(e){var t=document.head,i=document.createElement("link");i.type="text/css",i.rel="stylesheet",i.href=e,t.insertBefore(i,t.childNodes[0])}loadHtmlToElement(e,t){let i=document.getElementById(e);i.innerHTML=t;let n=document.getElementsByTagName("body")[0];n.insertBefore(i,n.firstChild)}loadScriptToDOM(e){var t=document.createElement("script");t.innerHTML=e,document.body.appendChild(t)}populateWidget(e){if(this.cassieWidgetFileSettings=new class{constructor(e){this.persistCookies=e.Custom1stPartyData?.length>0?e.Custom1stPartyData:[],this.privacyId=function(e){if(!e)return 1;let t=(e=e.substring(0,e.length-1)).split("|"),n=[];for(i=0;i<t.length;i++){let e=t[i].split(","),s="1"==e[1],o={PrivacyId:Number(e[0]),Default:s,ValidFrom:e[2]};n.push(o)}n.sort((function(e,t){return Date.parse(t.ValidFrom)-Date.parse(e.ValidFrom)}));let s=n.find((e=>0==e.Default));return s?s.PrivacyId:1}(e.Template.PrivacyPolicies),this.identityServiceUrl=e.IdentityServiceEndpoint??null,this.reconsentDate=e.ReconsentDate??"1970-01-01T00:00:00.000Z",this.cookieCollectionId=e.CookieCollectionId??1,this.identityServiceUrlPrefix=e.IdentityServiceUrlPrefix??null,this.CassieCookiesExpiry=e.CassieCookiesExpiry??365}}(e),e.Scripts.forEach((e=>{let t=new class{constructor(e){this.cookieId=e.CookieID,this.scriptName=e.CookieName,this.scriptDescription=e.CookieDescription??new String(""),this.isStrictlyNecessary=e.IsStrictlyNecessary??!1,this.isRunFirst=e.IsRunFirst??!1,this.executionOrder=e.ExecutionOrder??100,this.bodyOptIn=e.CookieBodyDivID,this.bodyOptOut=e.CookieBodyDivIDOptOut,this.headOptIn=e.CookieScript,this.headOptOut=e.CookieScriptOptOut,this.cookieUrl=e.CookieURL,this.channelId=e.ChannelID,this.expiry=e.Expiry,this.browserCookieName=e.BrowserCookieName,this.gtmConsentType=e.GtmConsentType}CreateScript(e){this.cookieId=e.cookieId,this.scriptName=e.scriptName,this.scriptDescription=e.scriptDescription,this.isStrictlyNecessary=e.isStrictlyNecessary,this.isRunFirst=e.isRunFirst,this.executionOrder=e.executionOrder,this.bodyOptIn=e.bodyOptIn,this.bodyOptOut=e.bodyOptOut,this.headOptIn=e.headOptIn,this.headOptOut=e.headOptOut,this.cookieUrl=e.cookieUrl,this.channelId=e.channelID,this.gtmConsentType=e.gtmConsentType}}(e);this.cassieScripts.push(t)})),!(e.AccessKeys?.split(",").map((e=>e.toLowerCase().trim()))??[]).includes(this.cassieSettings.profileSettings.AccessKey.toLowerCase().trim())&&"n/a"!=this.cassieSettings.profileSettings.AccessKey&&!this.cassieSettings?.customOptions?.isPreview)throw new Error(`Access Key: ${this.cassieSettings.profileSettings.AccessKey} can't access widget with id: ${this.cassieSettings.widgetId}`);let t=e.SupportedDomains;if(t&&!this.urlHelper.checkDomain(t)&&!this.cassieSettings?.customOptions?.isPreview)throw new Error(`Not supported domain: ${this.domain} the supported domains are ${t}. Please add this domain to your Cassie system`);this.cassieSettings.supportedDomains=t,this.widgetTemplate=e.Template,this.widgetTemplate.strictlyNecessary=e.Scripts.filter((e=>e.IsStrictlyNecessary)).map((e=>({cookieName:e.CookieName,cookieDescription:e.CookieDescription})))}}}()}();